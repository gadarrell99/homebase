# Homebase — Claude Development Guide

## What is Homebase?
Homebase is Rize Technology Group's central infrastructure dashboard. It monitors all servers, projects, and AI agents across the fleet.

## Architecture
- **Backend:** FastAPI (Python) on port 8000
- **Frontend:** Static HTML/CSS/JS served by FastAPI
- **Data:** infrastructure.json (single source of truth)
- **Database:** agents.db (SQLite — agent heartbeats and status)
- **Location:** /home/rizeadmin/homebase on Rize-Apps (.245)

## Key Files
- `backend/main.py` — All routes and API endpoints
- `backend/static/` — All HTML pages
- `data/infrastructure.json` — Fleet topology, projects, agents, credentials, domains
- `data/agents.db` — Agent heartbeat tracking
- `backend/services/sentinel.py` — Agent oversight system
- `backend/services/pipeline_monitor.py` — Cortex/audit pipeline health

## Navigation (9 items)
Dashboard | Fleet | Agents | Sentinel | Research | Infra Sheet | Settings | Backups

## Key Pages
- `/` — Dashboard (index.html) — Overview stats
- `/fleet` — Fleet (fleet.html) — Servers + Projects combined
- `/agents` — Agents (agents.html) — AI agent status
- `/sentinel` — Sentinel (sentinel.html) — Agent oversight + alerts
- `/research` — Research Scout (research.html) — Complaint detection
- `/infra` — Infra Sheet (infra.html) — Full infrastructure reference
- `/settings` — Settings (settings.html)
- `/backups` — Backups (backups.html)

## API Endpoints
- GET /api/fleet — Servers + projects combined
- GET /api/infrastructure — Full infrastructure.json
- GET /api/agents — Agent registry
- GET /api/sentinel/overview — Agent health summary
- GET /api/research — Research Scout items
- GET /api/sentinel/resources — Server resources (CPU/mem/disk)

## Data Flow
1. infra-scanner.py runs every 5 min (cron)
2. Updates live metrics in infrastructure.json
3. All pages read from infrastructure.json via API
4. Agents heartbeat to /api/agents/heartbeat every 5 min
5. Sentinel checks agent health every 30 min

## Rules
- infrastructure.json is the ONLY source of truth
- All pages must have identical nav bar
- Data loads immediately from cache, refreshes in background
- Never make users wait for initial page load

## DOCUMENTATION RULE
After ANY change to this project, update README.md, TODO.md, and CLAUDE.md before marking the task complete.
The task is NOT done until docs match reality.
